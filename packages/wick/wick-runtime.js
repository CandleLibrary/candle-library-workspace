(()=>{var Bt=Object.create;var Q=Object.defineProperty;var Ft=Object.getOwnPropertyDescriptor;var Nt=Object.getOwnPropertyNames;var qt=Object.getPrototypeOf,Jt=Object.prototype.hasOwnProperty;var Ut=l=>Q(l,"__esModule",{value:!0});var K=(l=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(l,{get:(t,e)=>(typeof require!="undefined"?require:t)[e]}):l)(function(l){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+l+'" is not supported')});var Vt=(l,t,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Nt(t))!Jt.call(l,s)&&s!=="default"&&Q(l,s,{get:()=>t[s],enumerable:!(e=Ft(t,s))||e.enumerable});return l},Y=l=>Vt(Ut(Q(l!=null?Bt(qt(l)):{},"default",l&&l.__esModule&&"default"in l?{get:()=>l.default,enumerable:!0}:{value:l,enumerable:!0})),l);var C=typeof window!="undefined"?window.fetch:null,$t=/(?:([a-zA-Z][\dA-Za-z\+\.\-]*)(?:\:\/\/))?(?:([a-zA-Z][\dA-Za-z\+\.\-]*)(?:\:([^\<\>\:\?\[\]\@\/\#\b\s]*)?)?\@)?(?:(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})|((?:\[[0-9a-f]{1,4})+(?:\:[0-9a-f]{0,4}){2,7}\])|([^\<\>\:\?\[\]\@\/\#\b\s\.]{2,}(?:\.[^\<\>\:\?\[\]\@\/\#\b\s]*)*))?(?:\:(\d+))?((?:[^\?\[\]\#\s\b]*)+)?(?:\?([^\[\]\#\s\b]*))?(?:\#([^\#\s\b]*))?/i,Xt=/^\/|^\w+\:|^\\\\/,zt=/^(\.+\/)|^w/,tt=/\/\//g,Gt=(()=>"process"in globalThis?process.platform!=="win32":!0)(),Zt={protocol:"",host:"",port:"",path:"",hash:"",query:"",search:"",hostname:"",pathname:""},B="'fetch' function is not defined";function F(l){let t=E.GLOBAL.host!==l.host&&!!l.host;return{IS_CORS:t,mode:t?"cors":"same-origin",credentials:t?"omit":"include"}}function Qt(l,t="cors"){return new Promise((e,s)=>{if(!C)throw new Error(B);C(l+"",Object.assign({method:"GET"},F(l))).then(r=>{r.status<200||r.status>299?r.text().then(s):r.text().then(e)}).catch(r=>s(r))})}function Kt(l,t="cors"){return new Promise((e,s)=>{if(!C)throw new Error(B);C(l+"",Object.assign({method:"GET"},F(l))).then(r=>{r.status<200||r.status>299?r.json().then(s):r.json().then(e).catch(s)}).catch(r=>s(r))})}function Yt(l,t="cors"){return new Promise((e,s)=>{if(!C)throw new Error(B);C(l+"",Object.assign({method:"GET"},F(l))).then(r=>{r.status<200||r.status>299?r.text().then(s):r.arrayBuffer().then(e).catch(s)}).catch(r=>s(r))})}function te(l,t,e="same-origin"){return new Promise((s,r)=>{var n;if(t instanceof FormData)n=t;else{n=new FormData;for(let o in t)n.append(o,t[o]+"")}if(!C)throw new Error(B);C(l+"",Object.assign({method:"POST",body:n},F(l))).then(o=>{o.status<200||o.status>299?o.text().then(r):o.json().then(s)}).catch(o=>o.text().then(r))})}function ee(l,t){let e=JSON.stringify(t);return new Promise((s,r)=>{if(!C)throw new Error(B);C(l+"",Object.assign({method:"POST",body:e,headers:{"Content-Type":"application/json",Accept:"application/json"}},F(l))).then(n=>{n.status<200||n.status>299?n.json().then(r):n.json().then(s)}).catch(n=>n.text().then(r))})}function se(l){return l.replace(/\//g,"\\")}function V(l){return l.replace(/\\/g,"/")}var E=class{constructor(t="",e=!1){this.protocol="",this.user="",this.pwd="",this.host="",this.port=0,this.path="",this.query="",this.hash="",this.map=null;let s=!0,r=!1,n=typeof document!="undefined"?document.location:Zt;if(typeof Location!="undefined"&&t instanceof Location&&(n=t,t="",r=!0),(!t||typeof t!="string")&&!(t instanceof E)&&(s=!1,r=!0,E.GLOBAL&&e))return E.GLOBAL;if(t instanceof E)this.protocol=t.protocol,this.user=t.user,this.pwd=t.pwd,this.host=t.host,this.port=t.port,this.path=V(t.path.replace(tt,"/")),this.query=t.query,this.hash=t.hash;else if(s){let o=t.match($t);if(!o||o[0]!==t)return new E("localhost");this.protocol=o[1]||(e?n.protocol:""),this.user=o[2]||"",this.pwd=o[3]||"",this.host=o[4]||o[5]||o[6]||(e?n.hostname:""),this.port=parseInt(o[7])||(e?parseInt(n.port):0),this.path=V((o[8]||(e?n.pathname:"")).replace(tt,"/")),this.query=o[9]||(e?n.search.slice(1):""),this.hash=o[10]||(e?n.hash.slice(1):"")}else if(r&&n&&(this.protocol=n.protocol.replace(/\:/g,""),this.host=n.hostname,this.port=parseInt(n.port),this.path=V(n.pathname.replace(tt,"/")),this.hash=n.hash.slice(1),this.query=n.search.slice(1),this._getQuery_(),e))return E.GLOBAL=this,E.GLOBAL;this._getQuery_()}static resolveRelative(t,e=E.GLOBAL?E.GLOBAL:typeof document!="undefined"&&typeof document.location!="undefined"?document.location.toString():""){let s=new E(e),r=new E(t);if(!(s+"")||!(r+""))return null;if(r.IS_RELATIVE){let n=s.path.split("/").slice(0,-1),o=r.path.split("/");for(let h=0;h<o.length;h++)switch(o[h].replace(/\.\.+/g,"..")){case".":n.splice(n.length-1,0);break;case"..":n.splice(n.length-1,1);break;default:n.push(o[h])}r.path=n.join("/").replace(/\/\//g,"/")}return r}async fetch(t){return C?C(this+"",t):X("",this+"")}static addProtocolHandler(){}_getQuery_(){if(this.query){let t=this.query.split(/(?<!\\)\&/g).map(e=>e.split("="));this.map=new Map(t)}}setPath(t){return this.path=t,this}setLocation(){history.replaceState({},"replaced state",`${this}`)}async DOES_THIS_EXIST(){return!0}toString(){let t=[];if(this.host&&(this.protocol&&t.push(`${this.protocol}://`),t.push(`${this.host}`)),this.port&&t.push(`:${this.port}`),this.path){let e=`${this.IS_RELATIVE||this.IS_ROOT?"":"/"}${this.path}`.replace(/\/\//g,"/");Gt?t.push(V(e)):t.push(se(e))}return this.query&&t.push((this.query[0]=="?"?"":"?")+this.query),this.hash&&t.push("#"+this.hash),t.join("")}getData(){let t={};if(this.map)for(let[e,s]of this.map.entries())s?t[e]=s:t[e]=!0;return t}setData(t){let e=[];for(let s in t){let r=t[s];typeof r=="boolean"?r&&e.push(s):e.push(`${s}=${r.toString()}`)}return this.query=(e.length>0?"?"+e.join("&"):"").replace(/\ +/g,"%20"),this}fetchText(){return Qt(this).then(t=>(E.RC.set(this.path,t),t))}fetchJSON(){return Kt(this).then(t=>(E.RC.set(this.path,t),t))}fetchBuffer(){return Yt(this).then(t=>(E.RC.set(this.path,t),t))}submitForm(t){return te(this,t)}submitJSON(t,e){return ee(this,t)}goto(){}get file(){return this.path.split("/").pop()??""}get filename(){return this.file.split(".").shift()??""}get dir(){return(this.path.split("/").slice(0,-1).join("/")+"/").replace(/\/\//g,"/")}get pathname(){return this.path}get href(){return this.toString()}get ext(){let t=this.file.match(/\.([^\.]*)$/);return t?t[1]:""}set ext(t){t="."+t.replace(/\./g,"");let e=this.ext;e?this.path=this.path.replace("."+e,t):this.path+=t}get search(){return this.query}get IS_RELATIVE(){return zt.test(this.path)}get IS_ROOT(){return!!Xt.test(this.path)}static getEXEURL(t){let e=t.url??"",s=new E(e);if(s.protocol=="file")s.protocol="";else if(s.protocol!="")return s;return new E(s)}static getCWDURL(){return E.GLOBAL}getRelativeTo(t){let e=new E(t),s=this.dir.split("/").filter(f=>!!f&&f!=="."),r=e.dir.split("/").filter(f=>!!f&&f!=="."),n=0,o=0,h=s.length-1;for(let f=s.length-1;f>=0;f--)for(let _=r.length-1;_>=0;_--){let p=_+1,g=f+1,m=0;for(;--p>=0&&--g>=0&&r[p]==s[g];)m++;m>0&&m<=h&&(f==0||e.IS_RELATIVE)&&(h=m,n=f+1,o=_+1)}let u=s.slice(n).map(f=>"..").concat(r.slice(o)).concat(e.file).join("/");return e.path=u,e}isSUBDIRECTORY_OF(t){if(t.IS_RELATIVE)return!1;let e=(this.IS_RELATIVE?E.resolveRelative(this,t)||new E:this).dir.split("/").slice(0,-1),s=t.dir.split("/").slice(0,-1);if(s.length>=e.length)return!1;for(let r=0;r<s.length;r++)if(s[r]!==e[r])return!1;return!0}};E.RC=new Map;E.GLOBAL=typeof location!="undefined"?new E(location):new E;var L=null;E.simulate=function(){L=new Map,E.prototype.fetchText=async l=>(l=this.toString(),L.get(l)?L.get(l):""),E.prototype.fetchJSON=async l=>(l=this.toString(),L.get(l)?JSON.parse(L.get(l).toString()):{})};E.addResource=(l,t)=>l&&t&&(L||(L=new Map))&&L.set(l.toString(),t.toString);var lt=!1;E.server=typeof globalThis.process=="undefined"?async()=>{}:async function(l){l=l||process.cwd()+"/";try{let t=await import("fs"),e=t.promises,s=await import("path"),r=await import("http");if(typeof global!="undefined"&&!lt){lt=!0,E.GLOBAL=new E(l);let n=global;n.document=n.document||{},n.document.location=E.GLOBAL,n.location=E.GLOBAL;let o=E.resolveRelative;E.resolveRelative=function(h,u=E.GLOBAL){let f=new E(u),_=new E(h);if(!_.IS_RELATIVE&&!_.IS_ROOT){let p=f.path.split("/").filter(R=>R!==".."),g=_+"",m=p.length;for(;m-->=1;)try{let R="";if(p[m]=="node_modules"?R=[...p.slice(0,m+1),g].join("/"):R=[...p.slice(0,m+1),"node_modules",g].join("/"),t.statSync(R))return new E(R)}catch{}return _}return o(_,f)},C=n.fetch=async(h,u)=>{if(u?.IS_CORS)return new Promise((f,_)=>{try{r.get(h,u,p=>{let g="";p.setEncoding("utf8"),p.on("data",m=>{g+=m}),p.on("end",()=>f(X(g,h+"")))})}catch(p){_(p)}});try{let f=s.resolve(process.cwd(),""+h),_=await e.readFile(f);return X(_,h+"")}catch(f){throw f}},E.prototype.DOES_THIS_EXIST=async function(){return this.IS_RELATIVE?!1:!!await e.stat(this.toString()).catch(h=>!1)}}}catch{console.error("Unable to load URI.server. Is this package running on a browser?");return}};Object.freeze(E.RC);Object.seal(E);var $=E;function X(l,t){return{get type(){return"basic"},get ok(){return!0},get bodyUsed(){return!0},get redirected(){return!1},get status(){return 200},get statusText(){return"200"},get headers(){return null},get body(){return Uint8Array.from(l)},get trailer(){return(async()=>null)()},get url(){return t},clone(){return X(l,t)},formData:()=>null,text:async()=>l instanceof Buffer?l.toString("utf8"):l,json:async()=>JSON.parse(l instanceof Buffer?l.toString("utf8"):l),arrayBuffer:async()=>l instanceof Buffer?l.buffer:Buffer.from(l)}}var W;(function(r){r.ELEMENT_RENDER="element-render-hook",r.STATIC_DATA_FETCH="static-data-fetch",r.TAG_PARSE="element-render-hook",r.TEST_HOOK="test-hook"})(W||(W={}));var H=class extends Error{get error_class(){return"plugin"}},et=class extends H{constructor(t){"validateSpecifier"in t?super(`Could Not Load PluginSpec: Invalid type [${t?.type}]`):super(`Could Not Load Plugin: Invalid type [${t?.type}]`)}},ht=class extends H{constructor(t){super("Could Not Load Plugin: Invalid Specifier type")}},ct=class extends H{constructor(t){super(`Spec type [${t?.type}] is not a valid plugin type.`)}},ut=class extends H{constructor(t){super(`Spec type [${t?.type}] has an invalid or missing validationSpecifier function`)}},ft=class extends H{constructor(t){t.requires?super("Missing one or both of requirements clientHandler or serverHandler"):super(`Missing requires object on spec ${t.type}`)}},_t=class extends H{constructor(t){super("Missing defaultRecover function")}},mt=class extends H{constructor(t,e){super(`Plugin ${t.type}::${t.specifier} missing requirement ${e}`)}},v=class{static addSpec(t){if(typeof t?.type!="string")throw new et(t);let e=!1;for(let s in W)if(W[s]==t?.type){e=!0;break}if(W[t?.type]==null&&!e)throw new ct(t);if(!("validateSpecifier"in t)||typeof t.validateSpecifier("test-123")!="boolean")throw new ut(t);if(!Array.isArray(t.requires)||!t.requires.includes("clientHandler")&&!t.requires.includes("serverHandler"))throw new ft(t);if(typeof t.defaultRecover!="function")throw new _t(t);v.specs.set(t.type,t)}constructor(){this.plugins=new Map}addPlugin(t){if(typeof t?.type!="string"||!v.specs.has(t?.type))throw new et(t);let e=v.specs.get(t.type);if(typeof t.specifier!="string"||!e.validateSpecifier(t.specifier))throw new ht(t);for(let s of e.requires)if(!(s in t))throw new mt(t,s);this.plugins.has(t.type)||this.plugins.set(t.type,new Map),this.plugins.get(t.type).set(t.specifier,t)}getPlugin(t,e){if(this.plugins.has(t)){let s=this.plugins.get(t);if(s.has(e))return s.get(e)}return null}hasPlugin(t,e){return this.plugins.has(t)?this.plugins.get(t).has(e):!1}async runClientPlugin(t,e,s,...r){let n=this.getPlugin(e,s);if(n)try{return await n.clientHandler(t,...r)}catch(o){console.log(o)}return await v.specs.get(e).defaultRecover("clientHandler",s,...r)}async runServerPlugin(t,e,s,...r){let n=this.getPlugin(e,s);if(n)try{return await n.clientHandler(t,...r)}catch(o){console.log(o)}return await v.specs.get(e).defaultRecover("serverHandler",s,...r)}};v.specs=new Map;var pt=null,z={options:{USE_SHADOW:!1,USE_SHADOWED_STYLE:!1,CACHE_URL:!1,GENERATE_SOURCE_MAPS:!1,REMOVE_DEBUGGER_STATEMENTS:!0,THROW_ON_ERRORS:!0,INCLUDE_SOURCE_URI:!1,url:{glow:"@candlelib/glow",wick:"@candlelib/wick",wickrt:"@candlelib/wick"}}},st=class{constructor(t={}){t=Object.assign({},z,t),t.options=Object.assign({},z.options,t.options),t.options.url=Object.assign({},z.options.url,(t.options||{}).url||{}),this.url=new $,this.document=typeof document!="undefined"?document:{},this.window=typeof window!="undefined"?window:{},this.wrapper=null,this.options=t.options,this.api={},this.models={},this.globals={},this.test_rig_sources=new Map,this.component_class=new Map,this.component_class_string=new Map,this.components=new Map,this.named_components=new Map,this.repo=new Map,this.styles=new Map,this.css_cache=new Map,this.plugins=new v,this.integrate_new_options(t),this.template_data=new WeakMap,this.active_template_data=null,this.processLink=e=>e,pt=this}integrate_new_options(t){this.verifyOptions(t),this.addRepoData(t),this.loadModelData(t),this.loadSchemeData(t),this.loadAPIObjects(t)}loadAPIObjects(t){if(t.api)for(let e in t.api)this.addAPIObject(e,t.api[e])}verifyOptions(t){let e=t.options;for(let s in e)if(typeof e[s]!=typeof z.options[s])throw new ReferenceError(`Unrecognized preset ${s}`)}loadSchemeData(t){let e=t.schemes}loadModelData(t){let e=t.models;if(e)for(let s in e)this.models[s]=e[s]}addRepoData(t){for(let[e,s]of t.repo||[])this.repo.set(s,{hash:e,url:s,module:null})}async getDataSource(t){let e=t+"";if(e in this.api)return this.api[e].default;let s;if(await t.DOES_THIS_EXIST())switch(t.ext){case"json":s=t.fetchJSON();break}return this.api[e]={hash:e,default:s},this.getDataSource(t)}addAPIObject(t,e){t in this.api||(this.api[t]={hash:t,default:e})}copy(){let t={};for(let s in this)s=="components"?t.components=this.components:typeof this[s]=="object"?t[s]=Object.assign({},this[s]):Array.is(this[s])?t[s]=this[s].slice():t[s]=this[s];let e=new st(t);return e.processLink=this.processLink.bind(this),e}assignGlobals(t){typeof t=="object"&&(this.globals=Object.assign({},t))}},y=st;y.global={get v(){return pt},set v(t){}};var Et;(function(t){t[t.local=0]="local"})(Et||(Et={}));var G=typeof window=="object"&&window?.requestAnimationFrame?window.requestAnimationFrame:l=>{setTimeout(l,5)},it=typeof performance=="undefined"?{now:()=>Date.now()}:performance,dt=class{constructor(){this.update_queue_a=[],this.update_queue_b=[],this.update_queue=this.update_queue_a,this.queue_switch=0,this.callback=this.update.bind(this),typeof window!="undefined"&&window.addEventListener?window.addEventListener("load",()=>{G(this.callback)}):(this.callback=this.update.bind(this),G(this.callback)),this.frame_time=it.now(),this.SCHEDULE_PENDING=!1,this.ACTIVE_UPDATE=!1}queueUpdate(t,e=1,s=0,r=!1){if(r&&this.ACTIVE_UPDATE){if(t._SCHD_==1)return;this.queue_switch==1?this.update_queue_a.push(t):this.update_queue_b.push(t)}else{if(typeof t._SCHD_=="number"&&t._SCHD_>0)return this.SCHEDULE_PENDING?void 0:G(this.callback);t._SCHD_=(e&65535|s<<16)<<1,this.update_queue.push(t),this.frame_time=it.now()|0,this.SCHEDULE_PENDING||(this.SCHEDULE_PENDING=!0,G(this.callback))}}removeFromQueue(t){if(t._SCHD_){for(let e=0,s=this.update_queue.length;e<s;e++)if(this.update_queue[e]===t){this.update_queue.splice(e,1),t._SCHD_=0,s==1&&(this.SCHEDULE_PENDING=!1);return}}}update(){this.SCHEDULE_PENDING=!1,this.ACTIVE_UPDATE=!0;let t=this.update_queue,e=it.now()|0,s=Math.ceil(e-this.frame_time)|1,r=s*.06;this.frame_time=e,this.queue_switch==0?(this.update_queue=this.update_queue_b,this.queue_switch=1):(this.update_queue=this.update_queue_a,this.queue_switch=0);for(let n=0,o=t.length,h=t[0];n<t.length;h=t[++n]){let u=h._SCHD_>>1,f=(u&65535)-s,_=u>>16&65535;if(h._SCHD_=0,f>0){this.queueUpdate(h,f,_);continue}f=0,_>0&&this.queueUpdate(h,f,_-s);try{h.scheduledUpdate(r,s)}catch(p){this.handleError(p)}}this.ACTIVE_UPDATE=!1,t.length=0}handleError(t){console.log("Spark: Error encountered"),console.error(t)}async sleep(t=1){return new Promise(e=>{this.queueUpdate({scheduledUpdate:()=>e(1)},t)})}},ie=new dt;var w=ie;var gt;(function(d){d[d.UNDECLARED=0]="UNDECLARED",d[d.INTERNAL_VARIABLE=1]="INTERNAL_VARIABLE",d[d.ATTRIBUTE_VARIABLE=2]="ATTRIBUTE_VARIABLE",d[d.MODEL_VARIABLE=4]="MODEL_VARIABLE",d[d.MODEL_DIRECT=512]="MODEL_DIRECT",d[d.TEMPLATE_CONSTANT=1024]="TEMPLATE_CONSTANT",d[d.TEMPLATE_INITIALIZER=2048]="TEMPLATE_INITIALIZER",d[d.CURE_TEST=4096]="CURE_TEST",d[d.CONFIG_GLOBAL=8192]="CONFIG_GLOBAL",d[d.GLOBAL_VARIABLE=8]="GLOBAL_VARIABLE",d[d.METHOD_VARIABLE=16]="METHOD_VARIABLE",d[d.CONST_INTERNAL_VARIABLE=32]="CONST_INTERNAL_VARIABLE",d[d.MODULE_MEMBER_VARIABLE=64]="MODULE_MEMBER_VARIABLE",d[d.MODULE_VARIABLE=128]="MODULE_VARIABLE",d[d.MODULE_NAMESPACE_VARIABLE=256]="MODULE_NAMESPACE_VARIABLE",d[d.CONSTANT_DATA_SOURCE=16384]="CONSTANT_DATA_SOURCE",d[d.DYNAMIC_DATA_SOURCE=32768]="DYNAMIC_DATA_SOURCE",d[d.DIRECT_ACCESS=208]="DIRECT_ACCESS"})(gt||(gt={}));var x;(function(u){u[u.DEFAULT_BINDING_STATE=1]="DEFAULT_BINDING_STATE",u[u.FROM_PARENT=2]="FROM_PARENT",u[u.FROM_PRESETS=4]="FROM_PRESETS",u[u.FROM_OUTSIDE=8]="FROM_OUTSIDE",u[u.ALLOW_EXPORT_TO_PARENT=16]="ALLOW_EXPORT_TO_PARENT",u[u.ALLOW_UPDATE_FROM_CHILD=32]="ALLOW_UPDATE_FROM_CHILD",u[u.ALLOW_UPDATE_FROM_MODEL=64]="ALLOW_UPDATE_FROM_MODEL",u[u.WRITTEN=128]="WRITTEN"})(x||(x={}));var bt;(function(n){n[n.UNCHECKED=0]="UNCHECKED",n[n.TRUE=1]="TRUE",n[n.FALSE=2]="FALSE",n[n.STATIC_CONSTANT=4]="STATIC_CONSTANT",n[n.STATIC_RUNTIME=8]="STATIC_RUNTIME"})(bt||(bt={}));var Mt;(function(m){m[m.UNDEFINED=0]="UNDEFINED",m[m.CONSTANT_STATIC=1]="CONSTANT_STATIC",m[m.WITH_MODEL=2]="WITH_MODEL",m[m.WITH_MODULE=4]="WITH_MODULE",m[m.WITH_PARENT=8]="WITH_PARENT",m[m.WITH_GLOBAL=16]="WITH_GLOBAL",m[m.WITH_VARIABLE=32]="WITH_VARIABLE",m[m.STATIC_WITH_PARENT=9]="STATIC_WITH_PARENT",m[m.STATIC_WITH_MODULE=5]="STATIC_WITH_MODULE",m[m.STATIC_WITH_MODEL=3]="STATIC_WITH_MODEL",m[m.STATIC_WITH_GLOBAL=17]="STATIC_WITH_GLOBAL",m[m.STATIC_WITH_VARIABLE=33]="STATIC_WITH_VARIABLE",m[m.INVALID=255]="INVALID"})(Mt||(Mt={}));var Ct;(function(e){e[e.FAILED_TO_FETCH_RESOURCE=0]="FAILED_TO_FETCH_RESOURCE",e[e.SYNTAX_ERROR_DURING_PARSE=1]="SYNTAX_ERROR_DURING_PARSE"})(Ct||(Ct={}));var Dt;(function(n){n[n.READ=1]="READ",n[n.WRITE=2]="WRITE",n[n.READONLY=1]="READONLY",n[n.WRITE_ONLY=2]="WRITE_ONLY",n[n.READ_WRITE=3]="READ_WRITE"})(Dt||(Dt={}));var wt;(function(p){p.ELEMENT_SELECTOR_STRING="esl",p.WATCHED_FRAME_METHOD_CALL="wfm",p.METHOD_CALL="mc",p.IMPORT_FROM_CHILD="ifc",p.EXPORT_TO_CHILD="etc",p.IMPORT_FROM_PARENT="ifp",p.EXPORT_TO_PARENT="etp",p.INPUT_VALUE="imp",p.CHECKED_VALUE="chk",p.CONTAINER_USE_IF="cui",p.CONTAINER_USE_EMPTY="cue"})(wt||(wt={}));var Ot;(function(r){r[r.INITIALIZE=0]="INITIALIZE",r[r.ASYNC_INITIALIZE=1]="ASYNC_INITIALIZE",r[r.VAR_UPDATE=2]="VAR_UPDATE",r[r.DESTROY=4]="DESTROY"})(Ot||(Ot={}));var St;(function(n){n[n.IS_ROOT=1]="IS_ROOT",n[n.EXTERNAL_COMPONENT=2]="EXTERNAL_COMPONENT",n[n.IS_COMPONENT=4]="IS_COMPONENT",n[n.IS_SLOT_REPLACEMENT=8]="IS_SLOT_REPLACEMENT",n[n.IS_INTERLEAVED=16]="IS_INTERLEAVED"})(St||(St={}));var a;(function(e){e[e.HTML_NODE=1048576]="HTML_NODE",e[e.HTML_ELEMENT=2097152]="HTML_ELEMENT"})(a||(a={}));var c;(function(i){i[i.WickBinding=1233125376]="WickBinding",i[i.HTML_IMPORT=1244659712]="HTML_IMPORT",i[i.HTMLAttribute=1250951168]="HTMLAttribute",i[i.HTMLText=1259339776]="HTMLText",i[i.ERROR=1266679808]="ERROR",i[i.HTML_Element=1278214144]="HTML_Element",i[i.HTML_TEXT=1286602752]="HTML_TEXT",i[i.HTML_TT=1294991360]="HTML_TT",i[i.HTML_I=1303379968]="HTML_I",i[i.HTML_B=1311768576]="HTML_B",i[i.HTML_BIG=1320157184]="HTML_BIG",i[i.HTML_SMALL=1328545792]="HTML_SMALL",i[i.HTML_EM=1336934400]="HTML_EM",i[i.HTML_STRONG=1345323008]="HTML_STRONG",i[i.HTML_DFN=1353711616]="HTML_DFN",i[i.HTML_CODE=1362100224]="HTML_CODE",i[i.HTML_SAMP=1370488832]="HTML_SAMP",i[i.HTML_KBD=1378877440]="HTML_KBD",i[i.HTML_VAR=1387266048]="HTML_VAR",i[i.HTML_CITE=1395654656]="HTML_CITE",i[i.HTML_ABBR=1404043264]="HTML_ABBR",i[i.HTML_ACRONYM=1412431872]="HTML_ACRONYM",i[i.HTML_SUP=1420820480]="HTML_SUP",i[i.HTML_SPAN=1429209088]="HTML_SPAN",i[i.HTML_BDO=1437597696]="HTML_BDO",i[i.HTML_BR=1445986304]="HTML_BR",i[i.HTML_BODY=1454374912]="HTML_BODY",i[i.HTML_ADDRESS=1462763520]="HTML_ADDRESS",i[i.HTML_DIV=1471152128]="HTML_DIV",i[i.HTML_A=1479540736]="HTML_A",i[i.HTML_MAP=1487929344]="HTML_MAP",i[i.HTML_AREA=1496317952]="HTML_AREA",i[i.HTML_LINK=1504706560]="HTML_LINK",i[i.HTML_IMG=1513095168]="HTML_IMG",i[i.HTML_OBJECT=1521483776]="HTML_OBJECT",i[i.HTML_PARAM=1529872384]="HTML_PARAM",i[i.HTML_HR=1538260992]="HTML_HR",i[i.HTML_P=1546649600]="HTML_P",i[i.HTML_H1=1555038208]="HTML_H1",i[i.HTML_H2=1563426816]="HTML_H2",i[i.HTML_H3=1571815424]="HTML_H3",i[i.HTML_H4=1580204032]="HTML_H4",i[i.HTML_H5=1588592640]="HTML_H5",i[i.HTML_H6=1596981248]="HTML_H6",i[i.HTML_PRE=1605369856]="HTML_PRE",i[i.HTML_Q=1613758464]="HTML_Q",i[i.HTML_BLOCKQUOTE=1622147072]="HTML_BLOCKQUOTE",i[i.HTML_INS=1630535680]="HTML_INS",i[i.HTML_DEL=1638924288]="HTML_DEL",i[i.HTML_DL=1647312896]="HTML_DL",i[i.HTML_DT=1655701504]="HTML_DT",i[i.HTML_DD=1664090112]="HTML_DD",i[i.HTML_OL=1672478720]="HTML_OL",i[i.HTML_UL=1680867328]="HTML_UL",i[i.HTML_LI=1689255936]="HTML_LI",i[i.HTML_FORM=1697644544]="HTML_FORM",i[i.HTML_LABEL=1706033152]="HTML_LABEL",i[i.HTML_INPUT=1714421760]="HTML_INPUT",i[i.HTML_SELECT=1722810368]="HTML_SELECT",i[i.HTML_OPTGROUP=1731198976]="HTML_OPTGROUP",i[i.HTML_OPTION=1739587584]="HTML_OPTION",i[i.HTML_TEXTAREA=1747976192]="HTML_TEXTAREA",i[i.HTML_FIELDSET=1756364800]="HTML_FIELDSET",i[i.HTML_LEGEND=1764753408]="HTML_LEGEND",i[i.HTML_BUTTON=1773142016]="HTML_BUTTON",i[i.HTML_TABLE=1781530624]="HTML_TABLE",i[i.HTML_CAPTION=1789919232]="HTML_CAPTION",i[i.HTML_THEAD=1798307840]="HTML_THEAD",i[i.HTML_TFOOT=1806696448]="HTML_TFOOT",i[i.HTML_TBODY=1815085056]="HTML_TBODY",i[i.HTML_COLGROUP=1823473664]="HTML_COLGROUP",i[i.HTML_COL=1831862272]="HTML_COL",i[i.HTML_TR=1840250880]="HTML_TR",i[i.HTML_TH=1848639488]="HTML_TH",i[i.HTML_TD=1857028096]="HTML_TD",i[i.HTML_HEAD=1865416704]="HTML_HEAD",i[i.HTML_TITLE=1873805312]="HTML_TITLE",i[i.HTML_BASE=1882193920]="HTML_BASE",i[i.HTML_META=1890582528]="HTML_META",i[i.HTML_STYLE=1898971136]="HTML_STYLE",i[i.HTML_SCRIPT=1907359744]="HTML_SCRIPT",i[i.HTML_NOSCRIPT=1915748352]="HTML_NOSCRIPT",i[i.HTML_HTML=1924136960]="HTML_HTML",i[i.HTML_SVG=1932525568]="HTML_SVG",i[i.HTML_BINDING_ELEMENT=1932525568]="HTML_BINDING_ELEMENT",i[i.CompiledBinding=1937768448]="CompiledBinding",i[i.ComponentVariableDeclaration=1946157056]="ComponentVariableDeclaration",i[i.MARKDOWN=1957691392]="MARKDOWN"})(c||(c={}));var At;(function(i){i[i.WickBinding=1233125376]="WickBinding",i[i.HTML_IMPORT=1244659712]="HTML_IMPORT",i[i.HTMLAttribute=1250951168]="HTMLAttribute",i[i.HTMLText=1259339776]="HTMLText",i[i.ERROR=1266679808]="ERROR",i[i.HTML_Element=1278214144]="HTML_Element",i[i.HTML_TEXT=1286602752]="HTML_TEXT",i[i.HTML_TT=1294991360]="HTML_TT",i[i.HTML_I=1303379968]="HTML_I",i[i.HTML_B=1311768576]="HTML_B",i[i.HTML_BIG=1320157184]="HTML_BIG",i[i.HTML_SMALL=1328545792]="HTML_SMALL",i[i.HTML_EM=1336934400]="HTML_EM",i[i.HTML_STRONG=1345323008]="HTML_STRONG",i[i.HTML_DFN=1353711616]="HTML_DFN",i[i.HTML_CODE=1362100224]="HTML_CODE",i[i.HTML_SAMP=1370488832]="HTML_SAMP",i[i.HTML_KBD=1378877440]="HTML_KBD",i[i.HTML_VAR=1387266048]="HTML_VAR",i[i.HTML_CITE=1395654656]="HTML_CITE",i[i.HTML_ABBR=1404043264]="HTML_ABBR",i[i.HTML_ACRONYM=1412431872]="HTML_ACRONYM",i[i.HTML_SUP=1420820480]="HTML_SUP",i[i.HTML_SPAN=1429209088]="HTML_SPAN",i[i.HTML_BDO=1437597696]="HTML_BDO",i[i.HTML_BR=1445986304]="HTML_BR",i[i.HTML_BODY=1454374912]="HTML_BODY",i[i.HTML_ADDRESS=1462763520]="HTML_ADDRESS",i[i.HTML_DIV=1471152128]="HTML_DIV",i[i.HTML_A=1479540736]="HTML_A",i[i.HTML_MAP=1487929344]="HTML_MAP",i[i.HTML_AREA=1496317952]="HTML_AREA",i[i.HTML_LINK=1504706560]="HTML_LINK",i[i.HTML_IMG=1513095168]="HTML_IMG",i[i.HTML_OBJECT=1521483776]="HTML_OBJECT",i[i.HTML_PARAM=1529872384]="HTML_PARAM",i[i.HTML_HR=1538260992]="HTML_HR",i[i.HTML_P=1546649600]="HTML_P",i[i.HTML_H1=1555038208]="HTML_H1",i[i.HTML_H2=1563426816]="HTML_H2",i[i.HTML_H3=1571815424]="HTML_H3",i[i.HTML_H4=1580204032]="HTML_H4",i[i.HTML_H5=1588592640]="HTML_H5",i[i.HTML_H6=1596981248]="HTML_H6",i[i.HTML_PRE=1605369856]="HTML_PRE",i[i.HTML_Q=1613758464]="HTML_Q",i[i.HTML_BLOCKQUOTE=1622147072]="HTML_BLOCKQUOTE",i[i.HTML_INS=1630535680]="HTML_INS",i[i.HTML_DEL=1638924288]="HTML_DEL",i[i.HTML_DL=1647312896]="HTML_DL",i[i.HTML_DT=1655701504]="HTML_DT",i[i.HTML_DD=1664090112]="HTML_DD",i[i.HTML_OL=1672478720]="HTML_OL",i[i.HTML_UL=1680867328]="HTML_UL",i[i.HTML_LI=1689255936]="HTML_LI",i[i.HTML_FORM=1697644544]="HTML_FORM",i[i.HTML_LABEL=1706033152]="HTML_LABEL",i[i.HTML_INPUT=1714421760]="HTML_INPUT",i[i.HTML_SELECT=1722810368]="HTML_SELECT",i[i.HTML_OPTGROUP=1731198976]="HTML_OPTGROUP",i[i.HTML_OPTION=1739587584]="HTML_OPTION",i[i.HTML_TEXTAREA=1747976192]="HTML_TEXTAREA",i[i.HTML_FIELDSET=1756364800]="HTML_FIELDSET",i[i.HTML_LEGEND=1764753408]="HTML_LEGEND",i[i.HTML_BUTTON=1773142016]="HTML_BUTTON",i[i.HTML_TABLE=1781530624]="HTML_TABLE",i[i.HTML_CAPTION=1789919232]="HTML_CAPTION",i[i.HTML_THEAD=1798307840]="HTML_THEAD",i[i.HTML_TFOOT=1806696448]="HTML_TFOOT",i[i.HTML_TBODY=1815085056]="HTML_TBODY",i[i.HTML_COLGROUP=1823473664]="HTML_COLGROUP",i[i.HTML_COL=1831862272]="HTML_COL",i[i.HTML_TR=1840250880]="HTML_TR",i[i.HTML_TH=1848639488]="HTML_TH",i[i.HTML_TD=1857028096]="HTML_TD",i[i.HTML_HEAD=1865416704]="HTML_HEAD",i[i.HTML_TITLE=1873805312]="HTML_TITLE",i[i.HTML_BASE=1882193920]="HTML_BASE",i[i.HTML_META=1890582528]="HTML_META",i[i.HTML_STYLE=1898971136]="HTML_STYLE",i[i.HTML_SCRIPT=1907359744]="HTML_SCRIPT",i[i.HTML_NOSCRIPT=1915748352]="HTML_NOSCRIPT",i[i.HTML_HTML=1924136960]="HTML_HTML",i[i.HTML_SVG=1932525568]="HTML_SVG",i[i.HTML_BINDING_ELEMENT=1932525568]="HTML_BINDING_ELEMENT",i[i.CompiledBinding=1937768448]="CompiledBinding",i[i.ComponentVariableDeclaration=1946157056]="ComponentVariableDeclaration",i[i.MARKDOWN=1957691392]="MARKDOWN"})(At||(At={}));var M=(()=>{let l=null;return{async loadGlow(t="@candlelib/glow"){return l=(await import(t)).default,l},root_components:[],get glow(){return l},get p(){return M.context},get C(){return k},router:null,context:null,rC:t=>(M.context.component_class.set(t.name,t),t),gC:t=>M.context.component_class.get(t),templates:new Map,OVERRIDABLE_onComponentCreate(t){},OVERRIDABLE_onComponentMetaChange(){},setPresets:t=>{if(M.context)t&&M.context.integrate_new_options(t);else{let e=new y(t);M.context=e}return M.context},init:null,addAPI(t){for(let e in t)M.context.api[e]={default:t[e]}}}})();function S(l,t,e){let s=l-t*e,r=Math.floor(s/e),n=l%e;return{row:r,col:n}}function N(l){if(M.glow)return M.glow.createTransition(l);{let t={add:()=>null,addEventListener:(e,s)=>s()};return{in:t,out:t,play:()=>null,addEventListener:(e,s)=>{s()}}}}var A;(function(s){s[s.OUT=0]="OUT",s[s.IN=1]="IN",s[s.ARRANGE=2]="ARRANGE"})(A||(A={}));var ne=[[[]]],nt=class{constructor(t,e,s,r,n=[]){if(this.comp_constructors=t,this.comp_attributes=e||ne,this.activeComps=[],this.dom_comp=[],this.filters=[],this.comps=[],this.dom_dn=[],this.dom_up=[],this.evaluators=Array(t.length),this.transition_list=[],this._SCHD_=0,this.shift_amount=1,this.limit=1/0,this.offset=0,this.offset_diff=0,this.offset_fractional=0,this.scrub_velocity=0,this.drag=.5,this.trs_ascending=null,this.trs_descending=null,this.USE_NULL_ELEMENT=!1,this.NULL_ELEMENT_DISCONNECTED=!1,this.UPDATE_FILTER=!1,this.DOM_UP_APPENDED=!1,this.DOM_DN_APPENDED=!1,this.AUTO_SCRUB=!1,this.LOADED=!1,this.SCRUBBING=!1,this.container=null,this.parent=r,this.filter=null,this.sort=null,this.first_dom_element=null,this.last_dom_element=null,this.components_pending_removal=[],this.ele=s,n.length>0||this.ele.tagName=="NULL"){if(this.USE_NULL_ELEMENT=!0,n.length>0){this.NULL_ELEMENT_DISCONNECTED=!0,this.ele.parentElement.removeChild(this.ele),this.first_dom_element=n[0],this.last_dom_element=n[n.length-1];for(let o of q(n))o.par=r,o.connect(),this.activeComps.push(o),this.comps.push(o),this.dom_comp.push(o)}}else if(this.ele.tagName=="TABLE"&&this.ele.firstElementChild&&this.ele.firstElementChild.tagName=="TBODY"&&(this.ele=this.ele.firstElementChild),this.ele.childElementCount>0)for(let o of q(Array.from(this.ele.children)))o.par=r,o.connect(),this.activeComps.push(o),this.comps.push(o),this.dom_comp.push(o)}destructor(){this.filter_new_items(),this.container&&this.container.OBSERVABLE&&this.container.unsubscribe(this)}sd(t){!t||(t.OBSERVABLE?t.subscribe(this):Array.isArray(t)?this.filter_new_items(t):this.filter_new_items(t.data),this.setLoadedFlag())}onModelUpdate(t){this.filter_new_items(t.data)}setLoadedFlag(){this.LOADED||(this.LOADED=!0)}forceMount(){let t=this.limit,e=this.offset,s=Math.min(e+this.offset_diff,e)*this.shift_amount,r=Math.max(e+this.offset_diff,e)*this.shift_amount+t,n=this.activeComps.length,o=s;for(this.ele.innerHTML="",this.dom_comp.length=0;o<r&&o<n;){let h=this.activeComps[o++];this.dom_comp.push(h),this.append(h)}}scrub(t,e=!0){let s=this.getWindowData();if(s.limit==0){this.SCRUBBING=!1;return}this.SCRUBBING||this.arrangeScrub(s,this.activeComps),this.SCRUBBING=!0,this.AUTO_SCRUB&&!e&&t!=1/0&&(this.scrub_velocity=0,this.AUTO_SCRUB=!1);let r=t+this.offset_fractional;if(t!==1/0){if(Math.abs(r)>1&&(r>0?(r=r%1,this.offset_fractional=r,this.scrub_velocity=t,this.offset<this.max&&this.trs_ascending.step(1),this.offset++,this.offset_diff=1,this.mutateDOM(this.getWindowData(),null,this.activeComps,!0).step(1).issueStopped(),this.arrangeScrub(s,this.activeComps)):(r=r%1,this.offset_fractional=r,this.scrub_velocity=t,this.offset>=1&&this.trs_descending.step(1),this.offset--,this.offset_diff=-1,this.mutateDOM(this.getWindowData(),null,this.activeComps,!0).step(1).issueStopped(),this.arrangeScrub(s,this.activeComps))),r>0){if(this.offset+r>=this.max-1&&(r=0),!this.DOM_UP_APPENDED){for(let n=0;n<this.dom_up.length;n++)this.append(this.dom_up[n]),this.dom_up[n].index=-1,this.dom_comp.push(this.dom_up[n]);this.DOM_UP_APPENDED=!0}this.trs_ascending.play(r)}else{if(this.offset<1&&(r=0),!this.DOM_DN_APPENDED){for(let n=0;n<this.dom_dn.length;n++)this.append(this.dom_dn[n],this.dom_comp[0].ele),this.dom_dn[n].index=-1;this.dom_comp=this.dom_dn.concat(this.dom_comp),this.DOM_DN_APPENDED=!0}this.trs_descending.step(-r)}return this.offset_fractional=r,this.scrub_velocity=t,!0}else if(Math.abs(this.scrub_velocity)>1e-4){let n=Math.sign(this.scrub_velocity);Math.abs(this.scrub_velocity)<.1&&(this.scrub_velocity=this.drag*.2*n),Math.abs(this.scrub_velocity)>.5&&(this.scrub_velocity=this.drag*n),this.AUTO_SCRUB=!0;let o=this.scrub_velocity*(1/(-this.drag+1)),h=this.offset+this.offset_fractional+o;h=this.scrub_velocity>0?Math.min(this.max,Math.ceil(h)):Math.max(0,Math.floor(h));let u=h-(this.offset+this.offset_fractional),f=Math.abs(1-1/(u/this.scrub_velocity));return this.drag=f,this.scrub_velocity=this.scrub_velocity,this.SCRUBBING=!0,w.queueUpdate(this),!0}else return this.offset+=Math.round(this.offset_fractional),this.scrub_velocity=0,this.offset_fractional=0,this.mutateDOM(this.getWindowData(),null,this.activeComps,!0).step(1).issueStopped(),this.SCRUBBING=!1,!1}arrangeScrub(t,e=this.activeComps){let{limit:s,offset:r,output_length:n,active_window_start:o}=t,h=this.limit;if(h>0){this.shift_amount=Math.max(1,Math.min(h,this.shift_amount));let u=0,f=0,_=[],p=Math.ceil(n/this.shift_amount);for(this.max=p-1,r=Math.max(0,Math.min(p-1,r)),this.trs_ascending=N(!1),this.trs_descending=N(!1),this.dom_dn.length=0,this.dom_up.length=0,this.DOM_UP_APPENDED=!1,this.DOM_DN_APPENDED=!1;u<o-this.shift_amount;)e[u++].index=-2;for(;u<o;){this.dom_dn.push(e[u]);let{row:g,col:m}=S(u,r-1,this.shift_amount);e[u].transitionIn(g,m,!0,this.trs_descending),e[u++].index=-2}for(;u<o+h&&u<n;){if(f<this.shift_amount&&++f){let{row:g,col:m}=S(u,r+1,this.shift_amount);e[u].transitionOut(g,m,!0,this.trs_descending)}else{let{row:g,col:m}=S(u,r+1,this.shift_amount);e[u].transitionIn(g,m,!1,this.trs_ascending)}if(u>=o+h-this.shift_amount){let{row:g,col:m}=S(u,r-1,this.shift_amount);e[u].transitionOut(g,m,!0,this.trs_descending)}else{let{row:g,col:m}=S(u,r-1,this.shift_amount);e[u].arrange(g,m,this.trs_descending)}e[u].index=u,_.push(e[u++])}for(;u<o+h+this.shift_amount&&u<n;){this.dom_up.push(e[u]);let{row:g,col:m}=S(u,r+1,this.shift_amount);e[u].transitionIn(g,m,!1,this.trs_ascending),e[u++].index=-3}for(;u<n;)e[u++].index=-3;e=_,n=_.length}else this.max=0,this.limit=0}addTransitioningComp(t,e,s,r,n){this.transition_list.push({comp:t,TYPE:e,DESCENDING:s,row:r,col:n})}getWindowData(t=this.activeComps){let e=this.limit,s=this.offset,r=t.length,n=Math.max(0,s*this.shift_amount),o=Math.min(n+e,r),h=Math.sign(this.offset_diff),u=h<0;return{limit:e,offset:s,output_length:r,active_window_start:n,upper_bound:o,direction:h,DESCENDING:u}}arrange(t,e=this.activeComps,s=N()){let{limit:r,offset:n,output_length:o,active_window_start:h,upper_bound:u,DESCENDING:f}=t,_=0;for(;_<h&&_<o;){if(e[_].CONNECTED){let{row:p,col:g}=S(_,n,this.shift_amount);this.addTransitioningComp(e[_],0,f,p,g),this.components_pending_removal.push(e[_])}_++}for(;_<u;){let{row:p,col:g}=S(_,n,this.shift_amount);e[_].CONNECTED?this.addTransitioningComp(e[_],2,f,p,g):this.addTransitioningComp(e[_],1,f,p,g),_++}for(;_<o;){if(e[_].CONNECTED){let{row:p,col:g}=S(_,n,this.shift_amount);this.addTransitioningComp(e[_],0,f,p,g),this.components_pending_removal.push(e[_])}_++}}updateRefs(t,e){let{limit:s,offset:r,output_length:n,active_window_start:o,upper_bound:h,direction:u}=t;this.ele.style.position=this.ele.style.position,this.USE_NULL_ELEMENT&&this.NULL_ELEMENT_DISCONNECTED&&h-o==0&&(this.dom_comp[0].ele.parentElement.insertBefore(this.ele,this.dom_comp[0].ele),this.NULL_ELEMENT_DISCONNECTED=!1),this.dom_comp.length=0;for(let f=o;f<h;f++)this.dom_comp.push(e[f]);this.USE_NULL_ELEMENT&&this.dom_comp.length>0&&(this.first_dom_element=this.dom_comp[0].ele,this.last_dom_element=this.dom_comp[this.dom_comp.length-1].ele)}append(t,e){this.USE_NULL_ELEMENT?this.NULL_ELEMENT_DISCONNECTED?e?t.appendToDOM(this.parent.ele,e):(e=this.last_dom_element,this.last_dom_element=t.ele,t.appendToDOM(this.parent.ele,e,!0)):(t.appendToDOM(this.ele.parentElement,this.ele,!1),this.ele.parentElement.removeChild(this.ele),this.first_dom_element=t.ele,this.last_dom_element=t.ele,this.NULL_ELEMENT_DISCONNECTED=!0):t.appendToDOM(this.ele,e)}appendToDOM(t,e){let{limit:s,offset:r,output_length:n,active_window_start:o}=t,h=o,u=Math.min(o+s,n),f=Math.min(o,n);for(;f<u;)e[f].index=f++;for(let _=0;_<this.dom_comp.length&&h<u;_++){let p=this.dom_comp[_];for(;h<u&&e[h].CONNECTED;)h++;for(;h<p.index&&h<u;){let g=e[h];g.index=-1,this.append(g,p.ele),h++}}for(;h<u;)this.append(e[h]),e[h].index=-1,h++;return h}removeFromDOM(){for(let t of this.components_pending_removal)t.removeFromDOM();this.components_pending_removal.length=0}mutateDOM(t,e,s=this.activeComps,r=!1){let n=!1;return e||(e=N(),n=!0),this.arrange(t,s,e),this.appendToDOM(t,s),this.updateRefs(t,s),this.primeTransitions(e),n&&(!M.glow||r?this.removeFromDOM():e.asyncPlay().then(this.removeFromDOM.bind(this))),e}primeTransitions(t){for(let{TYPE:e,row:s,col:r,DESCENDING:n,comp:o}of this.transition_list)switch(e){case 1:o.transitionIn(s,r,n,t);break;case 0:o.transitionOut(s,r,n,t);break;case 2:o.arrange(s,r,t);break}this.transition_list.length=0}limitExpressionUpdate(t){this.mutateDOM(this.getWindowData(),t),this.offset_diff=0}filterExpressionUpdate(t){this.updateFilter(),this.limitExpressionUpdate(t)}updateFilter(){if(this.activeComps.length=0,this.filter)for(let t of this.comps)this.filter(t.container_model)?this.activeComps.push(t):t.CONNECTED&&this.components_pending_removal.push(t);else this.activeComps.push(...this.comps);return this.sort&&this.activeComps.sort(this.sort),this.UPDATE_FILTER=!1,this.activeComps}setFilter(t){typeof t=="function"&&(this.filter=t)}setSort(t){typeof t=="function"&&(this.sort=t)}updateScrub(t){typeof t=="number"&&t!=0?this.scrub(t):t===null&&this.SCRUBBING&&(this.AUTO_SCRUB=!0,this.scheduledUpdate())}updateLimit(t){let e=parseInt(t.toString());e?(e=Math.max(0,e),this.limit!=e&&(this.limit=e,w.queueUpdate(this))):(this.limit=1/0,w.queueUpdate(this))}updateShift(t){typeof t=="number"&&this.shift_amount!=t&&(this.shift_amount=t,w.queueUpdate(this))}updateOffset(t){typeof t=="number"&&this.offset!=t&&(this.offset=t,w.queueUpdate(this))}scheduledUpdate(){if(this.SCRUBBING){if(!this.AUTO_SCRUB){this.SCRUBBING=!1;return}if(Math.abs(this.scrub_velocity)>1e-4){if(this.scrub(this.scrub_velocity)){this.scrub_velocity*=this.drag;let t=this.offset+this.scrub_velocity;(t<0||t>this.max)&&(this.scrub_velocity=0),w.queueUpdate(this)}}else this.scrub_velocity=0,this.scrub(1/0),this.SCRUBBING=!1}else this.filterExpressionUpdate()}filter_new_items(t=[]){let e=N();if(t.length==0){let s=this.activeComps.length;this.USE_NULL_ELEMENT&&this.NULL_ELEMENT_DISCONNECTED&&this.first_dom_element.parentElement.insertBefore(this.first_dom_element,this.ele);for(let r=0;r<s;r++){let{row:n,col:o}=S(r,this.offset,this.shift_amount);this.addTransitioningComp(this.activeComps[r],0,!1,n,o)}this.comps.length=0,this.activeComps.length=0,this.primeTransitions(e),this.SCRUBBING||e.play()}else{let s=new Map(t.map(n=>[n,!0])),r=[];for(let n=0,o=this.activeComps.length;n<o;n++)s.has(this.activeComps[n].container_model)&&s.set(this.activeComps[n].container_model,!1);for(let n=0,o=this.comps.length;n<o;n++)s.has(this.comps[n].container_model)?s.set(this.comps[n].container_model,!1):(this.addTransitioningComp(this.comps[0],0,!1,-1,-1),this.comps[n].index=-1,this.comps.splice(n,1),o--,n--);if(s.forEach((n,o)=>{n&&r.push(o)}),r.length>0)this._add(r,e);else for(let n=0,o=0,h=this.activeComps.length;n<h;n++,o++)if(this.activeComps[n]._TRANSITION_STATE_){if(o!==n){let{row:u,col:f}=S(n,this.offset,this.shift_amount);this.activeComps[n].arrange(u,f,e)}}else this.activeComps.splice(n,1),n--,h--;this.scheduledUpdate()}}addEvaluator(t,e){this.evaluators[e]=t}_add(t,e){let s=!1,r=this.comp_constructors.length;e||(s=!0);for(let n of t){let o=null;if(n instanceof k)o=n;else for(let h=0;h<r;h++){let u=this.evaluators[h];if(h==r-1||u&&u(n)){o=new this.comp_constructors[h](null,null,[this.parent]),o.hydrate().initialize(n),o.disconnect();let f=this.comp_attributes[h];if(f)for(let[_,p]of f)!_||(_=="class"?o.ele.classList.add(...p.split(" ")):o.ele.setAttribute(_,p));o.container_model=n;break}}o&&(o.par=this.parent,this.comps.push(o))}s&&this.filterExpressionUpdate(e)}};function*vt(l){let t=l.classList.length;for(let e=0;e<t;e++)xt(l.classList[e])&&(yield l.classList[e])}var re=/W[_\$a-zA-Z0-9]+/;function xt(l){return!!l.match(re)}function Lt(l){return l&&l.hasAttribute("w:c")&&[...vt(l)].length>0}function Ht(l){return l&&l.tagName=="TEMPLATE"&&l.hasAttribute("w:c")&&xt(l.id+"")}function q(l){let t=[];for(let e of l)t.push(Z(e));return t}function Z(l,t=[],e){let s=vt(l),r=0,n=void 0,o=null;for(let h of s){let u=M.gC(h);if(u)if(!o&&e)o=e,t=t.concat(o),r++;else{let f=new u(l,n,t,n,n,r++);f.hydrate(),t=t.concat(f),o||(o=f)}else console.warn(`WickRT :: Could not find component data for ${h}`)}return o}function Tt(l,t,e=[]){let s=l.getAttribute("w:ctr").split(" ").map(o=>t.context.component_class.get(o)),r=(l.getAttribute("w:ctr-atr")??"").split(":").map(o=>o.split(";").map(h=>h.split("=")));if(s.length<1)throw new Error(`Could not find component class for ${name} in component ${t.name}`);let n=new nt(s,r,l,t,e);t.ctr.push(n)}var Rt;(function(e){e[e.DOWN=1]="DOWN",e[e.UP=2]="UP"})(Rt||(Rt={}));var kt;(function(s){s[s.CONNECTED=1]="CONNECTED",s[s.TRANSITIONED_IN=2]="TRANSITIONED_IN",s[s.DESTROY_AFTER_TRANSITION=4]="DESTROY_AFTER_TRANSITION"})(kt||(kt={}));var k=class{constructor(t=null,e=null,s=[],r="",n=M.context,o=0){this.name=this.constructor.name,this.ele=null,this.ci=0,this.ch=[],this.elu=[],this.ctr=[],this.pui=[],this.nui=[],this.model=null,this.call_set=new Map,this.binding_call_set=[],this.updated_attributes=new Set,this.update_state=0,this.active_flags=0,this.call_depth=0,this.affinity=o,this.ALLOW_UPDATE=!1,this.CONNECTED=!1,this.INITIALIZED=!1,this.TRANSITIONED_IN=!1,this.DESTROY_AFTER_TRANSITION=!1,this.up=this.updateParent,this.spm=this.syncParentMethod,this.pup=this.updateFromChild,this.ufp=this.updateFromParent,this._SCHD_=0,this.polling_id=-1,this.context=n;let h=s[s.length-1];h&&h.addChild(this),r&&(n.models[r]||(n.models[r]={}),this.model=n.models[r]),this.wrapper=e,t?this.integrateElement(t,s.concat(this)):this.ele=this.createElement(n,[this]),this.ele.setAttribute("wrt:c",this.name)}initialize(t=this.model){if(!this.INITIALIZED){this.INITIALIZED=!0,this.ALLOW_UPDATE=!0;for(let e of this.ch)e.initialize();return this.model=t,this.init(this),this.async_init(),this.setModel(t),this}}hydrate(){let t=this.context;this.wrapper?(this.ele.appendChild(this.wrapper.ele),this.wrapper.setModel({comp:this})):t.wrapper&&this.name!==t.wrapper.name&&(this.wrapper=new(t.component_class.get(t.wrapper.name))({comp:this}),this.ele.appendChild(this.wrapper.ele));try{this.c()}catch(s){console.error(s)}M.OVERRIDABLE_onComponentCreate(this);for(let s of this.ch)s.hydrate();return this}destructor(){this.model&&this.setModel(null),this.wrapper&&this.wrapper.destructor(),this.par&&this.par.removeChild(this),this.removeCSS()}removeChild(t){t.par==this&&(this.ch=this.ch.filter(e=>e!==t),t.par=null)}addChild(t){for(let e of this.ch)e!=t;t.par=this,this.ch.push(t)}connect(){this.CONNECTED=!0,this.ALLOW_UPDATE=!0;for(let t of this.ch)t.connect();this.onModelUpdate()}disconnect(){for(let t of this.ch)t.disconnect();this.ALLOW_UPDATE=!1,this.CONNECTED=!1}ce(){if(M.templates.has(this.name)){let t=M.templates.get(this.name);if(t){let e=t.content.cloneNode(!0),s=e.firstElementChild;return this.integrateElement(s),s}}throw new Error("WickRT :: NO template element for component: "+this.name)}removeCSS(){let t=this.context.css_cache.get(this.name);t&&(t.count--,t.count<=0&&(t.css_ele.parentElement.removeChild(t.css_ele),this.context.css_cache.delete(this.name)))}setCSS(t=this.getCSS()){if(t){if(this.context.css_cache.has(this.name))this.context.css_cache.get(this.name).count++;else{let{window:{document:e},css_cache:s}=this.context,r=e.createElement("style");r.innerHTML=t,e.head.appendChild(r),s.set(this.name,{css_ele:r,count:1})}this.ele.classList.add(this.name)}}appendToDOM(t,e=null,s=!1){this.connecting(),this.connect(),e?s?e.nextElementSibling?e.parentElement.insertBefore(this.ele,e.nextElementSibling):e.parentElement.appendChild(this.ele):e.parentElement.insertBefore(this.ele,e):t.appendChild(this.ele),this.connected()}removeFromDOM(){this.CONNECTED!=!1&&(this.disconnecting(),this.ele&&this.ele.parentElement&&this.ele.parentElement.removeChild(this.ele),this.disconnect(),this.disconnected())}oTI(t,e,s,r){}oTO(t,e,s,r){}aRR(t,e,s){}onTransitionOutEnd(){return this.TRANSITIONED_IN||(this.removeFromDOM(),this.DESTROY_AFTER_TRANSITION&&this.destructor(),this.DESTROY_AFTER_TRANSITION=!1),this.out_trs=null,!1}transitionOut(t,e,s,r=null,n=!1){for(let h of this.ch)h.transitionOut(t,e,s,r,!1);this.DESTROY_AFTER_TRANSITION=n,this.TRANSITIONED_IN=!1;let o=0;if(r){this.oTO(t,e,s,r.out),r.addEventListener("stopped",this.onTransitionOutEnd.bind(this));try{o=r.out_duration}catch(h){console.log(h)}}else this.out_trs||this.onTransitionOutEnd();return o=Math.max(o,0),o}se(t,e){this.elu[t]||(this.elu[t]=[]),this.elu[t].push(e)}re(t,e){!this.elu[t]||(this.elu[t]=this.elu[t].filter(s=>s!=e))}arrange(t,e,s){this.aRR(t,e,s.in)}transitionIn(t,e,s,r){for(let n of this.ch)n.transitionIn(t,e,s,r);try{this.oTI(t,e,s,r.in),this.TRANSITIONED_IN=!0}catch(n){console.log(n)}}setModel(t){this.model&&t!=this.model&&(this.polling_id>=0&&(clearInterval(this.polling_id),this.polling_id=-1),this.model.unsubscribe&&this.model.unsubscribe(this),this.model=null),t&&(this.model=t,typeof t.subscribe=="function"?t.subscribe(this):(this.polling_id<0&&(this.polling_id=setInterval(this.onModelUpdate.bind(this),1e3/15)),this.onModelUpdate(t)))}removeModel(){this.setModel(null)}onModelUpdate(t=this.model,e=x.ALLOW_UPDATE_FROM_MODEL|x.DEFAULT_BINDING_STATE){!this.ALLOW_UPDATE||t&&(this.update(t,e),this.updateChildrenWithModel(t))}updateChildrenWithModel(t){for(let e of this.ch)e.onModelUpdate(t,x.ALLOW_UPDATE_FROM_MODEL|x.FROM_PARENT|x.DEFAULT_BINDING_STATE)}update(t,e=1,s=!1){if(!!this.ALLOW_UPDATE){for(let r in t){let n=t[r];if(typeof n!="undefined"&&this.nlu){let o=this.nlu[r];e&&(o>>>24&e)==e&&this.ua(o&16777215,n)}}for(let[r,n]of this.clearActiveCalls())this.lookup_function_table[r].call(this,...n);s&&this.scheduledUpdate(0,0)}}ua(t,e,s=!1){let r=this,n=r[t];return e!==n&&(r[t]=e,!this.call_set.has(t)&&this.lookup_function_table[t]&&this.lookup_function_table[t].call(this,this.call_depth)),s?n:r[t]}fua(t,e,s=!1){let r=this,n=r[t];return!this.call_set.has(t)&&this.lookup_function_table[t]&&this.call_set.set(t,[this.active_flags,this.call_depth]),r[t]=e,w.queueUpdate(this,0,0,!0),s?n:r[t]}u(t,e=this.call_depth){let s=this.updated_attributes.values();this.updated_attributes.clear();for(let r of s)this.lookup_function_table[r]&&this.call_set.set(r,[t,e]);w.queueUpdate(this)}check(...t){let e=this;for(let s of t)if(typeof e[s]=="undefined")return!1;return!0}syncParentMethod(t,e,s){this.ci=s,this.pui[t]=this.par["u"+e]}updateFromParent(t,e,s){s>>24!=this.ci+1&&(this.active_flags|=x.FROM_PARENT,this.ua(t,e))}updateParent(t){this.par&&this.updateFromChild.call(this.par,t)}updateFromChild(t){for(let e in t){let s=t[e];if(typeof s!="undefined"&&this.nlu){let r=this.nlu[e];if(r>>>24&x.ALLOW_UPDATE_FROM_CHILD){let n=this.call_depth;this.call_depth=0,this.ua(r&16777215,s),this.call_depth=n}}}}scheduledUpdate(t,e){this.call_depth=1;for(let[s,r]of this.clearActiveBindingCalls())this.lookup_function_table[s].call(this,r),this.call_depth=0,this.active_flags=0;for(let[s,r]of this.clearActiveCalls())this.lookup_function_table[s].call(this,...r),this.call_depth=0,this.active_flags=0}clearActiveBindingCalls(){if(this.binding_call_set.length==0)return[];let t=this.binding_call_set.slice();return this.binding_call_set.length=0,t}clearActiveCalls(){if(this.call_set.size==0)return[];let t=[...this.call_set.entries()];return this.call_set.clear(),t}runActiveCalls(){}call(t,e=0){for(let[s]of this.binding_call_set)if(s==t)return;this.lookup_function_table[t].call(this,e)}c(){}init(t){}async_init(){}onMounted(){}getCSS(){return""}integrateElement(t,e=[this]){let s=0,r=!0,n=this;if(!this.ele)t.classList.add(this.name),this.ele=t,t.wick_component=this,t.hasAttribute("w:ctr")&&({sk:s,PROCESS_CHILDREN:r}=Pt(t,n,s,r));else{if(t.hasAttribute("w:own")&&+(t.getAttribute("w:own")||-1)!=this.affinity)return 0;if(t.tagName=="W-E"){let o=t.children[0];return this.integrateElement(o,e),t.hasAttribute("w:u")&&this.se(parseInt(t.getAttribute("w:u")||"0"),o),t.replaceWith(o),0}else if(t.tagName=="W-B"){let o=document.createTextNode(t.innerHTML);return t.replaceWith(o),t.hasAttribute("w:u")&&this.se(parseInt(t.getAttribute("w:u")||"0"),o),t=o,0}else{if(t.tagName=="A"&&M.context.processLink(t),t.hasAttribute("w:o"))return this.par.se(+t.hasAttribute("w:o"),t),Wt(t,this.par,e),0;if(t.hasAttribute("w:r")){let o=+(t.getAttribute("w:r")||-1),h=o%50,u=o/50|0;n=e[u],n.se(h,t)}t.hasAttribute("w:ctr")?{sk:s,PROCESS_CHILDREN:r}=Pt(t,n,s,r):t.hasAttribute("w:c")&&this.ele!==t&&(Z(t,e),r=!1)}}return t.hasAttribute("w:u")&&this.se(parseInt(t.getAttribute("w:u")||"0"),t),r&&Wt(t,n,e),s}ue(t,e){for(let s of this.elu[t]??[]){if(e instanceof HTMLElement){this.re(t,s),this.se(t,e),s.parentElement&&s.parentElement.replaceChild(e,s);continue}else if(!(s instanceof Text)){let r=new Text;this.re(t,s),this.se(t,r),s.parentElement&&s.parentElement.replaceChild(r,s),s=r}s.data=e}}sa(t,e,s){for(let r of this.elu[t]??[])e=="value"?r.value=s:r.setAttribute(e,s)}al(t,e,s,r=!1){for(let n of this.elu[t]??[]){let o=r?s.bind(this):s;n.addEventListener(e,o)}}makeElement(t,e=""){let s=document.createElement("div");return s.innerHTML=t,s.firstElementChild}createElement(t,e){let s=this.ce();return Z(s,e,this),this.integrateElement(s,e),s}connecting(){}connected(){}disconnecting(){}disconnected(){}};function Pt(l,t,e,s){let r=parseInt(l.getAttribute("null")||"0")||0,n=[];if(r>0){let o=l;for(let h=0;h<r;h++)n.push(o.nextElementSibling),o=n[h]}return Tt(l,t,n),e=r,s=!1,{sk:e,PROCESS_CHILDREN:s}}function Wt(l,t,e){let s=0;for(let r of Array.from(l.children)||[])s-- >0||(s=t.integrateElement(r,e))}async function yt(l,t){for(let[e,s]of l?.repo??[])if(!t.api[e])try{let n=await import(new $(s)+"");t.api[e]={default:n.default??null,module:n}}catch(r){console.warn(new Error(`Could not load module ${s}`)),console.error(r)}}var b=(l,t,e)=>Object.defineProperty(l,t,{value:e,configurable:!1,enumerable:!1,writable:!0}),It=(l,t,e)=>Object.defineProperty(l,t,{value:e,configurable:!1,enumerable:!1,writable:!1}),D=class{constructor(){b(this,"OBSERVABLE",!0),b(this,"_SCHD_",0),b(this,"_cv_",[]),b(this,"fv",null),b(this,"par",null),b(this,"prop_name",""),b(this,"observers",[])}destroy(){for(var t=this.fv;t;){let e=t.nx;t.unsetModel(),t=e}this._cv_=null}setHook(t,e){return e}getHook(t,e){return e}scheduleUpdate(t){this.par&&this.par.scheduleUpdate(),this.observers.length!=0&&(t&&this._cv_.push(t),w.queueUpdate(this))}subscribe(t){return this.observers.indexOf(t)>=0?!1:(this.observers.push(t),t.onModelUpdate(this),!0)}unsubscribe(t){return this.observers.indexOf(t)>=0?(this.observers.splice(this.observers.indexOf(t),1),!0):!1}scheduledUpdate(t){this.updateViews()}updateViews(){for(let t of this.observers)t.onModelUpdate(this)}toJSON(t){return JSON.stringify(this,null,"	")}set(t){return!1}};var J=class{constructor(){this.start_value=void 0}parse(t){return t}verify(t,e){e.valid=!0}filter(t,e){for(let s=0,r=e.length;s<r;s++)if(t===e[s])return!0;return!1}string(t){return t+""}};var oe=()=>{};var I=class extends D{constructor(t=[]){super();return b(this,"source",null),b(this,"first_link",null),b(this,"pin",oe),b(this,"next",null),b(this,"prev",null),b(this,"_filters_",null),this.validator=new J,this}setByIndex(t,e){}getByIndex(t,e){}destroy(){this._filters_=null,this.source&&this.source.__unlink__(this),super.destroy()}get length(){return 0}set length(t){}__defaultReturn__(t){return this}push(...t){t.forEach(e=>{e instanceof Array?e.forEach(s=>{this.insert(s)}):this.insert(e)})}get(t,e){let s=null;t=this.getHook("term",t);let r=e!==null;if(t?e?s=e:(this.source||(r=!1),s=this.__defaultReturn__(r),s.__setFilters__(t)):s=e||this.__defaultReturn__(r),!t)this.__getAll__(s);else{let n=t;Array.isArray(t)||(n=[t]),n=n.map(o=>this.validator.parse(o)),this.__get__(n,s)}return s}set(t){return this.insert(t),!1}insert(t){t=this.setHook("",t);let e=this.fv?[]:null,s=!1;if(Array.isArray(t))for(let r=0;r<t.length;r++)this.__insertSub__(t[r],s,e)&&(s=!0);else t&&(s=this.__insertSub__(t,s,e));return s&&(this.par&&this.par.scheduleUpdate(this.prop_name),this.scheduleUpdate()),s}__insertSub__(t,e,s){var r=this._gI_(t);return r!==void 0&&(t&&typeof t=="object"&&!(t instanceof D)&&this.model&&(t=new this.model.constructor(t),t.par=this),e=this.__insert__(t,s)),e}delete(t,e=!1){this.remove(t)}remove(t,e=!1,s=!1){if(!s&&this.source)return t?this.source.remove(t):this.source.remove(this._filters_);let r=[];if(!t)this.__removeAll__();else{let n=Array.isArray(t)?t:[t];n=n.map(o=>o instanceof D?o:this.validator.parse(o)),this.__remove__(n,r)}return r.length>0&&r&&r.length>0&&(this.updateViews(),this.scheduleUpdate()),r}cull(t){let e={},s=this.__getAll__([]),r=n=>{if(n instanceof Array)return n.forEach(h=>r(h));let o=this._gI_(n);o!==void 0&&(e[o]=n)};r(t);for(let n=0;n<s.lenth;n++){let o=s[n];s[this._gI_(o)]||this.__remove__(o)}this.insert(t)}__setFilters__(t){this._filters_||(this._filters_=[]),Array.isArray(t)?this._filters_=this._filters_.concat(t.map(e=>this.validator.parse(e))):this._filters_.push(this.validator.parse(t))}__filterIdentifier__(t,e){return e.length>0?this.validator.filter(t,e):!0}_gIf_(t,e){let s=this._gI_(t,this._filters_)}_gI_(t,e=null){return t}__insert__(t,e=this.fv?[]:null){return!1}__get__(t,e){return e}__getAll__(t){return t}__removeAll__(){return[]}__remove__(t,e=null){return!1}},rt=I.prototype;b(rt,"model",null);b(rt,"key","");b(rt,"validator",null);var ae={set:function(l,t,e){if(t in l&&l[t]==e)return!0;let s=l[t];return s&&typeof s=="object"?s.set(e):l[t]=e,l.scheduleUpdate(t),!0},get:function(l,t,e){if(t in l)return l[t];if(!isNaN(t))return l.data[t];let s={};return s[l.key]=t,l.get(t,[])[0]}},O=class extends I{constructor(t=[]){super();return t[0]&&t[0].model&&(t[0].model&&(this.model=t[0].model),t=t.slice(1)),this.data=[],Array.isArray(t)&&t.length>0&&this.insert(t),this.proxy}destroy(){this.data=null,super.destroy()}get proxy(){return new Proxy(this,ae)}set proxy(t){}get length(){return this.data.length}set length(t){let e=Math.min(Math.max(0,t),this.data.length);this.data.length=e,this.scheduleUpdate()}__defaultReturn__(t){return this}__insert__(t,e){return this.data.push(t),e&&e.push(t),!0}getByIndex(t){return this.data[t]}setByIndex(t,e){this.data[t]=e}__get__(t,e){let s=null;t&&(t instanceof Array?s=t:s=[t]);for(let r=0,n=this.data.length;r<n;r++){let o=this.data[r];this._gI_(o,s)&&e.push(o)}return e}__getAll__(t){return this.data.forEach(e=>{t.push(e)}),t}__removeAll__(){let t=this.data.map(e=>e);return this.data.length=0,t}__remove__(t,e){let s=!1;t=t.map(n=>n instanceof D?this._gI_(n):n);for(let n=0,o=this.data.length;n<o;n++){var r=this.data[n];if(this._gI_(r,t)){s=!0,this.data.splice(n,1),o--,n--,e.push(r);break}}return s}toJSON(){return JSON.stringify(this.data)}[Symbol.iterator](){let t=-1;return{next:e=>t<this.data.length?{value:this.data[++t],done:t==this.data.length}:{value:null,done:!0}}}remove(t){t>=0&&t<this.length&&(this.data.splice(t,1),this.scheduleUpdate())}splice(t,e,...s){this.data.splice(t,e,...s),this.scheduleUpdate()}sort(t){this.data.sort(t),this.scheduleUpdate()}indexOf(t){return this.data.indexOf(t)}pop(){let t=this.data.pop();return this.scheduleUpdate(),t}shift(){let t=this.data.shift();return this.scheduleUpdate(),t}filter(t){return this.data.filter(t)}map(t){return this.data.map(t)}concat(...t){let e=[...this.data];for(let s of t)s instanceof O?e.push(...s.data):Array.isArray(s)?e.push(...s):e.push(s);return e}reduce(t,e){this.data.reduce(t,e)}};Object.freeze(O);var j=class extends D{constructor(t){super();if(b(this,"prop_array",[]),b(this,"prop_offset",0),b(this,"look_up",{}),t)for(let e in t)this.createProp(e,t[e]);return this}get proxy(){return this}set(t,e=""){if(typeof t=="undefined")return!1;let s=!1;for(let r in t){let n=this.look_up[r];if(n!==void 0){let o=this.prop_array[n];typeof o=="object"?o.set(t[r],!0)&&(this.scheduleUpdate(),s=!0):o!==t[r]&&(this.prop_array[n]=t[r],this.scheduleUpdate(),s=!0)}else this.createProp(r,t[r]),s=!0}return s}createProp(t,e){let s=this.prop_offset++;switch(this.look_up[t]=s,typeof e){case"object":if(e){Array.isArray(e)?this.prop_array.push(new O(e)):e instanceof D?this.prop_array.push(e):this.prop_array.push(new ot(e)),this.prop_array[s].prop_name=t,this.prop_array[s].par=this,Object.defineProperty(this,t,{configurable:!1,enumerable:!0,get:function(){return this.getHook(t,this.prop_array[s])},set:r=>{}});break}default:this.prop_array.push(e),Object.defineProperty(this,t,{configurable:!1,enumerable:!0,get:function(){return this.getHook(t,this.prop_array[s])},set:function(r){this.prop_array[s]!==r&&(this.prop_array[s]=this.setHook(t,r),this.scheduleUpdate(t))}})}this.scheduleUpdate()}scheduleUpdate(){this.par&&this.par instanceof O&&this.par.scheduleUpdate(),super.scheduleUpdate()}toJSON(t=!0){let e={};for(let s in this.look_up){let r=this.look_up[s],n=this.prop_array[r];n&&(n instanceof D?e[s]=n.toJSON(!1):e[s]=n)}return t?JSON.stringify(e):e.toString()}};function ot(l){return Array.isArray(l)?new O(l):new j(l)}function le(l,t,e,s){l[e]||Object.defineProperty(l,e,{configurable:!1,enumerable:!0,get:function(){return this.getHook(e,this.prop_array[s])},set:function(r){let n={valid:!1},o=t.parse(r);t.verify(o,n),n.valid&&this.prop_array[s]!=o&&(this.prop_array[s]=this.setHook(e,o),this.scheduleUpdate(e),this._changed_=!0)}})}function U(l,t,e,s){Object.defineProperty(l,e,{configurable:!1,enumerable:!0,get:function(){let r=this.prop_array[s];if(!r){let n=this.address.slice();n.push(s),r=new t(null,this.root,n),r.par=this,r.prop_name=e,r.MUTATION_ID=this.MUTATION_ID,this.prop_array[s]=r}return this.getHook(e,r)}})}var jt=class extends O{constructor(t){super(t.self);if(t.proto)for(let e in t.proto)b(this,e,t.proto[e])}},P=class extends D{constructor(t,e=null){super();if(this.constructor===P&&(this.constructor=class extends P{}),!this.schema){let s=this.constructor.schema||e;if(this.constructor.schema=s,s){let r=s.__FinalConstructor__,n=this.constructor,o=n.prototype;if(!r){let h=0,u={};for(let f in s){let _=s[f];if(f=="self"&&Array.isArray(_))return new jt(s,root,address);if(f=="getHook"){o.getHook=_;continue}if(f=="setHook"){o.setHook=_;continue}if(f=="proto"){for(let p in s.proto)b(o,p,s.proto[p]);continue}if(typeof _=="function")U(o,_,f,h);else if(typeof _=="object")Array.isArray(_)?_[0]&&_[0].container&&_[0].schema?U(o,_[0],f,h):_[0]instanceof I?U(o,_[0].constructor,f,h):U(o,j,f,h):_ instanceof J?le(o,_,f,h):U(o,_.constructor,f,h);else{console.warn(`Could not create property ${f}.`);continue}u[f]=h,h++}return b(o,"prop_offset",h),b(o,"look_up",u),b(o,"changed",!1),Object.seal(n),s.__FinalConstructor__=n,new s.__FinalConstructor__(t)}It(o,"schema",s)}else return new j(t)}Object.defineProperty(this,"prop_array",{value:new Array(this.prop_offset),enumerable:!1,configurable:!1,writable:!0}),t&&this.set(t)}destroy(){}set(t){if(!t)return!1;this._changed_=!1;for(let e in t){let s=t[e];if(this.look_up[e]!==void 0){let n=this[e];typeof n=="object"?n.set(s,!0)&&this.scheduleUpdate(e):this[e]=s}}return this._changed_}createProp(){}};P.prototype.toJSON=j.prototype.toJSON;var at=l=>!0,he=function(){console.warn(`Wick.rt is incapable of compiling components. Use the full Wick library instead. 
	 A placeholder component will be generated instead.`);let l={mount:at,get pending(){return l},class:function(){this.ele=document.createElement("div"),this.ele.innerHTML="Wick.rt is incapable of compiling components, a dummy component has been generated instead."},createInstance:at};return l},T=Object.assign(he,{rt:M,setWrapper:at,init_module_promise:null,objects:{WickRTComponent:k,Context:y,Observable:ot,ObservableArray:O,ObservableScheme(l){return new P(l)}},async appendPresets(l){return T.rt.setPresets(l),T.init_module_promise=yt(l,T.rt.context),T.init_module_promise},async hydrate(){window.addEventListener("load",async()=>{T.init_module_promise&&await T.init_module_promise;let l=ce();for(let t of q(l))t.initialize(),t.connect(),M.root_components.push(t)})},toString(){}});globalThis.wick=T;function ce(l=window.document.body){let t=[l],e=[];for(;t.length>0;)for(let s of Array.from(t.shift().children??[]))s.nodeType==Node.ELEMENT_NODE&&(Ht(s)?M.templates.set(s.id,s):Lt(s)?e.push(s):t.push(s));return e}var Fs=T;})();
